<!DOCTYPE html>

<html lang="pt-br">
    <head>
        <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet" />

        <link href="css/dashboard.css" rel="stylesheet" />
        <link href="css/default.css" rel="stylesheet" />
        <link href="css/header.css" rel="stylesheet" />

        <meta charset="UTF-8" />
        <meta content="initial-scale=1.0, width=device-width" name="viewport" />
        <meta content="ie=edge" http-equiv="X-UA-Compatible" />

        <title>Sparkling Lab - Dashboard</title>
    </head>

    <body>
        <header class="header">
            <nav class="container header_nav">
                <a class="logo" href="#">Sparkling Lab</a>

                <!-- TIP: Será estilizado como um botão, embora seja um link para outra página. -->
                <a class="button" href="index.html">Sair</a>
            </nav>
        </header>

        <main class="container" id="container">
            <h3 id="nextPaymentElRef">
                Este mês você já poupou R$1.250,00
            </h3>

            <div class="menu">
                <button onclick="fetchAndShowAreas()">Monitorar em Tempo Real</button>
            </div>

            <div id="areasElRef"></div>
        </main>

        <footer class="container">
            <a class="logo" href="#">Sparkling Lab</a>
            Todos os direitos reservados &copy; 2019
        </footer>

        <script>
            var months = [
                "Janeiro",
                "Fevereiro",
                "Março",
                "Abril",
                "Maio",
                "Junho",
                "Julho",
                "Agosto",
                "Setembro",
                "Outubro",
                "Novembro",
                "Dezembro"
            ];
            var today = new Date();
            var nextPayment = new Date();
            nextPayment.setMonth(today.getMonth() + 1);

            nextPaymentElRef.innerHTML += `
                <br>
                O seu próximo pagamento será em 01 de ${months[nextPayment.getMonth()]}
            `;

            function fetchAndShowAreas() {
                areasElRef.innerHTML = "";

                var areas = [
                    {
                        id: 0,
                        description: "Garagem"
                    },
                    {
                        id: 1,
                        description: "Elevador"
                    },
                    {
                        id: 2,
                        description: "Área externa"
                    }
                ];

                areasElRef.innerHTML += `<div id="areaSelectionElRef"></div>`;

                for (var i = 0; i < areas.length; i++) {
                    areaSelectionElRef.innerHTML += `<button onclick="fetchAndShowLamps(${areas[i].id})">${areas[i].description}</button>`;
                }

                areasElRef.innerHTML += `<div id="lampsElRef"></div>`;
            }

            function fetchAndShowLamps(areaId) {
                lampsElRef.innerHTML = "";

                var lamps = [
                    {
                        id: 0,
                        description: "Entrada"
                    },
                    {
                        id: 1,
                        description: "Saída"
                    },
                    {
                        id: 2,
                        description: "Escadaria"
                    }
                ];

                lampsElRef.innerHTML += `<div id="lampSelectionElRef"></div>`;

                for (var i = 0; i < lamps.length; i++) {
                    lampSelectionElRef.innerHTML += `<button onclick="fetchAndShowChart(${lamps[i].id})">${lamps[i].description}</button>`;
                }

                lampsElRef.innerHTML += `<div id="chartElRef"></div>`;
            }

            function fetchAndShowChart(lampId) {
                chartElRef.innerHTML = `${lampId}`;
            }
        </script>
    </body>
</html>
