<!DOCTYPE html>

<html lang="pt-br">
    <head>
        <link rel="stylesheet" href="css/default.css" />
        <link rel="stylesheet" href="css/header.css" />
        <link rel="stylesheet" href="css/sign-up.css" />

        <meta charset="UTF-8" />
        <meta content="initial-scale=1.0, width=device-width" name="viewport" />
        <meta content="ie=edge" http-equiv="X-UA-Compatible" />

        <title>Sparkling Lab - Registro</title>
    </head>

    <body>
        <main class="center container">
            <form class="center container" id="form_cadastro" method="post" onsubmit="return cadastrar()">
                <h1>Registro</h1>
    
                <label>
                    <div>Nome</div>
                    <input name="nome" type="text" />
                </label>
    
                <label>
                    <div>Sobrenome</div>
                    <input name="sobrenome" type="text" />
                </label>
    
                <label>
                    <div>Email</div>
                    <input name="email" type="email" placeholder="maria@exemplo.com.br" />
                </label>
    
                <label>
                    <div>Senha</div>
                    <input name="senha" type="password" />
                </label>
    
                <button class="button" id="btn_cadastrar">Cadastrar</button>

                <a class="link" href="sign-in.html">
                    Entrar
                </a>
    
                <div id="div_erro" style="background-color: sandybrown; color: maroon; display: none;">
                    Erro no cadastro
                </div>
            </form>

        </main>

        <footer class="container">
            <a class="logo" href="index.html">Sparkling Lab</a>
            Todos os direitos reservados &copy; 2019
        </footer>
    </body>
</html>

<script>

    function cadastrar(){
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/sindico/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response){
            if(response.ok){
                console.log("cadastrou");
                window.location.href='sign-in.html';
            }else{
                console.log('Erro ao cadastrar!');
                response.text().then(function(resposta){
                    div_erro.innerHTML = resposta;
                })
            }
        });
        return false;
    }

</script>